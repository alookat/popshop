<style>
  #map {
    height: 400px;
  }
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }
</style>


<script>

</script>


<div id="map"></div>

<script>
  // Multiple markers: https://www.taniarascia.com/google-maps-apis-for-multiple-locations/
  // Standard Google Maps setup: https://developers.google.com/maps/documentation/javascript/tutorial

  // Alternative tutorial: https://wrightshq.com/playground/placing-multiple-markers-on-a-google-map-using-api-3/

  // Get LatLng from Address: http://www.latlong.net/convert-address-to-lat-long.html

  // #2 Pull array Here

  // #1 Push each post info, lat, long into an array here. In  JS?
  // var posts = {{ site.posts | jsonify }}
  // var posts = "hello"

  // http://stackoverflow.com/questions/28142507/jekyll-liquid-tag-inside-javascript

  {% capture posts %}
  [
  {% for post in site.posts %}
  {
  "title"    : "{{ post.title }}",
  "lat"      : "{{ post.lat }}",
  "long"      : "{{ post.long }}"
  } {% if forloop.last %}{% else %},{% endif %}
  {% endfor %}
  ]
  {% endcapture %}

  var posts = {{ posts | strip_newlines}}

  console.log(posts);

  function initMap() {

    var broadway = {
  		info: '<strong>Post Title Here</strong><br>\
  					5224 N Broadway St<br> Chicago, IL 60640<br>\
  					<a href="#sennheiser">More</a>',
  		lat: 40.724230,
  		long: -74.001108
  	};

  	var belmont = {
  		info: '<strong>Chipotle on Belmont</strong><br>\
  					1025 W Belmont Ave<br> Chicago, IL 60657<br>\
  					<a href="#casper">More</a>',
  		lat: 40.724924,
  		long: -74.001808
  	};

  	var sheridan = {
  		info: '<strong>Chipotle on Sheridan</strong><br>\r\
  					6600 N Sheridan Rd<br> Chicago, IL 60626<br>\
  					<a href="#sennheiser">More</a>',
  		lat: 40.724020,
  		long: -74.001508
  	};

    var locations = [
      [broadway.info, broadway.lat, broadway.long, 0],
      [belmont.info, belmont.lat, belmont.long, 1],
      [sheridan.info, sheridan.lat, sheridan.long, 2],
    ];

    // Testing the working array
    // console.log(locations);
    console.log(posts[0]);



    var map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 40.724124, lng: -74.001108},
      zoom: 15,
      // mapTypeId: google.maps.MapTypeId.ROADMAP
      styles: [
        {
          "featureType": "poi.business",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "road",
          "elementType": "labels.icon",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        },
        {
          "featureType": "transit",
          "stylers": [
            {
              "visibility": "off"
            }
          ]
        }
      ]
    });

    // https://developers.google.com/maps/documentation/javascript/infowindows
    var infowindow = new google.maps.InfoWindow({});

    var marker, i;

    for (i = 0; i < locations.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
  			map: map,
        // title: 'Uluru (Ayers Rock)'
      });

      google.maps.event.addListener(marker ,'click', (function (marker, i) {
        return function () {
          infowindow.setContent(locations[i][0]);
          // infowindow.setContent(posts[i][0]);
          infowindow.open(map, marker);


        }
      })(marker, i));
    }
  }



</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD5ufpuvR5hkwNIJW9ks4XZMrAgoIPtL0c&callback=initMap"
async defer></script>
